# claude-code-command-switch Windows 命令模板
# 此文件会被 claude-switch 自动使用

# 模板变量（会被自动替换）:
# {{COMMAND_NAME}} - 命令名称，如 claude-glm
# {{MODEL_ID}} - 模型 ID，如 glm-4
# {{API_ENDPOINT}} - API 端点
# {{KEY_ENV_VAR}} - API Key 环境变量名
# {{DESCRIPTION}} - 模型描述

# ========== 批处理文件版本 (.cmd) ==========
@{
    Content = @'
@echo off
REM Auto-generated by claude-code-command-switch
REM Command: {{COMMAND_NAME}}
REM Model: {{MODEL_ID}}
REM Description: {{DESCRIPTION}}

setlocal

REM 检查 API Key 环境变量
if "%{{KEY_ENV_VAR}}%"=="" (
    echo 错误: 环境变量 {{KEY_ENV_VAR}} 未设置
    echo.
    echo 请设置您的 API Key:
    echo   setx {{KEY_ENV_VAR}} "your-api-key-here"
    echo.
    echo 然后重启终端使环境变量生效
    exit /b 1
)

REM 设置 Claude API 环境变量
set ANTHROPIC_API_KEY=%{{KEY_ENV_VAR}}%
set ANTHROPIC_BASE_URL={{API_ENDPOINT}}

REM 调用原始 claude 命令
claude %*
'@
}

# ========== PowerShell 脚本版本 (.ps1) ==========
@{
    Content = @'
# Auto-generated by claude-code-command-switch
# Command: {{COMMAND_NAME}}
# Model: {{MODEL_ID}}
# Description: {{DESCRIPTION}}

# 检查 API Key 环境变量
$key = [Environment]::GetEnvironmentVariable("{{KEY_ENV_VAR}}")

if ([string]::IsNullOrEmpty($key)) {
    Write-Host "错误: 环境变量 {{KEY_ENV_VAR}} 未设置" -ForegroundColor Red
    Write-Host ""
    Write-Host "请设置您的 API Key:" -ForegroundColor Yellow
    Write-Host '  [Environment]::SetEnvironmentVariable("{{KEY_ENV_VAR}}", "your-api-key-here", "User")'
    Write-Host ""
    Write-Host "然后重启 PowerShell 使环境变量生效"
    exit 1
}

# 设置 Claude API 环境变量
$env:ANTHROPIC_API_KEY = $key
$env:ANTHROPIC_BASE_URL = "{{API_ENDPOINT}}"

# 调用原始 claude 命令
& claude $args
'@
}

# 使用说明:
# 1. 批处理文件版本用于 CMD 和 Git Bash
# 2. PowerShell 脚本版本用于 PowerShell
# 3. 两个版本会同时生成，用户在任何终端都可以使用
